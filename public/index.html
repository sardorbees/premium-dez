<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#000000" />
  <meta name="description" content="Web site created using create-react-app" />
  <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />
  <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
  <title>React App</title>
</head>

<body>
  <noscript>Saytni ogirlayman deb umid qima baribir kodlarni olomaysan</noscript>
  <div id="root"></div>
  <script src="../src/components/assents/js/bootstrap.min.js"></script>
  <script src="../src/components/assents/js/function.js"></script>
  <script src="../src/components/assents/js/gsap.min.js"></script>
  <script src="../src/components/assents/js/isotope.min.js"></script>
<script src="../src//components/assents/js/clickDetector.js"></script>
  <script>
    let clickCount = 0;
    let blocked = false;

    document.addEventListener('click', () => {
      if (blocked) return;

      clickCount++;
      if (clickCount > 20) {
        // Показать сообщение
        alert('У вас атака на сайт! AutoClick нажимает');
        blocked = true;

        // Отправить на backend
        fetch('https://backend-dedd.onrender.com/api/clickapp/api/monitor-clicks/', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({ clicks: clickCount })
        }).then(res => res.json()).then(data => {
          if (data.blocked) {
            localStorage.setItem('blocked', 'true');
            window.location.reload();
          }
        });
      }
    });

    // Проверка при загрузке
    if (localStorage.getItem('blocked') === 'true') {
      document.body.innerHTML = "<h1 style='color:red;text-align:center'>⛔ Доступ заблокирован: подозрение на AutoClick</h1>";
    }
  </script>
</body>

</html>
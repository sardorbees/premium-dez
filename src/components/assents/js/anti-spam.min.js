(function () { const api = atob('aHR0cHM6Ly9iYWNrZW5kLWRlZGQub25yZW5kZXIuY29tL2FwaS9hcHBsaWNhdGlvbmFwcGxpY2F0aW9ucy8='); const form = document.getElementById('contactForm'); const status = document.getElementById('status'); const post = (u, d) => fetch(u, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(d) }); form.addEventListener('submit', async function (e) { e.preventDefault(); status.textContent = ''; status.style.color = 'black'; const fd = new FormData(form); const d = {}; fd.forEach((v, k) => d[k] = v.trim()); try { const r = await post(api, d); if (r.status === 429) { status.textContent = '❌ Вы уже отправляли заявку. Повторите через 1 час.'; status.style.color = 'red'; } else if (r.ok) { status.textContent = '✅ Заявка успешно отправлена!'; status.style.color = 'green'; form.reset(); } else { status.textContent = '⚠️ Ошибка при отправке заявки.'; status.style.color = 'orange'; } } catch { status.textContent = '⛔ Не удалось отправить. Проверьте соединение.'; status.style.color = 'red'; } }); })();
